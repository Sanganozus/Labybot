<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HWPRobot: timeTask.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HWPRobot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('time_task_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">timeTask.h File Reference<div class="ingroups"><a class="el" href="group__lib.html">lib</a> &raquo; <a class="el" href="group__tools.html">tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for timed execution of code and measurement of execution time.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_g_p_i_o_r0_defs_8h_source.html">GPIOR0Defs.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;avr/io.h&gt;</code><br />
</div>
<p><a href="time_task_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtime_task__time__t.html">timeTask_time_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp structure which holds a timstamp acquired by <a class="el" href="time_task_8h.html#a8d1bb394b8fd926a298686e31f057837" title="Get a timestamp for execution time measurement.">timeTask_getTimestamp()</a>.  <a href="structtime_task__time__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aef699878d6c6b78f8343ab3c6c5fa1a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#aef699878d6c6b78f8343ab3c6c5fa1a6">CYCLETASK</a>(name,  cycles)&#160;&#160;&#160;static uint32_t name = 0; if (! (name = (name &gt; cycles) ? 0 : (name + 1)))</td></tr>
<tr class="memdesc:aef699878d6c6b78f8343ab3c6c5fa1a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execution of body block every 'cycles' loop cycles.  <a href="time_task_8h.html#aef699878d6c6b78f8343ab3c6c5fa1a6">More...</a><br /></td></tr>
<tr class="separator:aef699878d6c6b78f8343ab3c6c5fa1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17ec8d44bd9cef3a238ce450a3ac29c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c">TIMETASK</a>(name,  interval_ms)</td></tr>
<tr class="memdesc:aa17ec8d44bd9cef3a238ce450a3ac29c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execution of body block with a minimum delay of 'interval_ms' milliseconds in between.  <a href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c">More...</a><br /></td></tr>
<tr class="separator:aa17ec8d44bd9cef3a238ce450a3ac29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a822c1dd28154e13180cc743b24eb7411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411">timeTask_init</a> (void)</td></tr>
<tr class="memdesc:a822c1dd28154e13180cc743b24eb7411"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization for the <a class="el" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c" title="Execution of body block with a minimum delay of &#39;interval_ms&#39; milliseconds in between.">TIMETASK</a> macro and for execution time measurement.  <a href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411">More...</a><br /></td></tr>
<tr class="separator:a822c1dd28154e13180cc743b24eb7411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1737a27bf166782ba7995a8c3be4137f"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#a1737a27bf166782ba7995a8c3be4137f">timeTask_getUptime</a> (void)</td></tr>
<tr class="memdesc:a1737a27bf166782ba7995a8c3be4137f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current uptime in milliseconds.  <a href="time_task_8h.html#a1737a27bf166782ba7995a8c3be4137f">More...</a><br /></td></tr>
<tr class="separator:a1737a27bf166782ba7995a8c3be4137f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1bb394b8fd926a298686e31f057837"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#a8d1bb394b8fd926a298686e31f057837">timeTask_getTimestamp</a> (<a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *timestamp)</td></tr>
<tr class="memdesc:a8d1bb394b8fd926a298686e31f057837"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a timestamp for execution time measurement.  <a href="time_task_8h.html#a8d1bb394b8fd926a298686e31f057837">More...</a><br /></td></tr>
<tr class="separator:a8d1bb394b8fd926a298686e31f057837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b2c9c69d7b5f602148b927769c3d03"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03">timeTask_getDuration</a> (const <a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *startTime, const <a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *stopTime)</td></tr>
<tr class="memdesc:a30b2c9c69d7b5f602148b927769c3d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the duration between timestamps stopTime and startTime.  <a href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03">More...</a><br /></td></tr>
<tr class="separator:a30b2c9c69d7b5f602148b927769c3d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for timed execution of code and measurement of execution time. </p>
<p>Timer 5 is used for measuring the uptime. Its output compare match ISR <code>TIMER5_COMPA_vect</code> is fired every millisecond.</p>
<p>Note that the ISR <code>TIMER5_COMPA_vect</code> also has the responsibility of starting AD conversions if the ADC library has been initialized by <a class="el" href="adc_8h.html#a2dcdab718d3e55b1d407969a4e31ce96" title="Initialize the AD converter library.">ADC_init()</a>. See <a class="el" href="adc_8h.html" title="Library for interfacing with AD converter.">lib/io/adc/adc.h</a> for further details.</p>
<p>Several bits of the register GPIOR0 are used for different purposes. The bits are defined in <a class="el" href="_g_p_i_o_r0_defs_8h.html" title="Definitions for timeTask and ADC functions and interrupts concerning the use of the register GPIOR0.">lib/tools/timeTask/GPIOR0Defs.h</a>.</p><ul>
<li>The bit defined by <a class="el" href="_g_p_i_o_r0_defs_8h.html#a9b78db1bc4ce49dc723097bcabb04227" title="Definition of bit in GPIOR0 used by ADC functions and the ISR TIMER5_COMPA_vect.">GPIOR0_ADC_BIT</a> determines if the ADC has been initialized and is activated (modified by <a class="el" href="adc_8h.html#a2dcdab718d3e55b1d407969a4e31ce96" title="Initialize the AD converter library.">ADC_init()</a>, <a class="el" href="adc_8h.html#acafc9cec4cf5a3d747325539cb7ed70b" title="Suspend the start of new AD conversions.">ADC_pause()</a> and <a class="el" href="adc_8h.html#a5c344207115c857598028c0f98239575" title="Resume AD conversions previously suspended by ADC_pause().">ADC_resume()</a>). If this flag is set, ADC conversions are triggered by the ISR <code>TIMER5_COMPA_vect</code>.</li>
<li>The bit defined by <a class="el" href="_g_p_i_o_r0_defs_8h.html#a708f9e125fc5f244e2e3f8ebc611364f" title="Definition of bit in GPIOR0 used by timeTask_init().">GPIOR0_INIT_BIT</a> serves as a flag which determines if <a class="el" href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411" title="Initialization for the TIMETASK macro and for execution time measurement.">timeTask_init()</a> has already been called in order to prevent multiple initializations.</li>
<li>The bit defined by <a class="el" href="_g_p_i_o_r0_defs_8h.html#a68d2ba193bf37ba6b385d3a49163855e" title="Definition of bit in GPIOR0 used by TIMETASK macro and ISR TIMER5_COMPA_vect.">GPIOR0_INDEX_BIT</a> serves an array index (which can only be 0 or 1) into an internally managed array timeTask_uptime[2]. This array, keeping the current and the previous uptime, and the index bit are written asynchronously in interrupt context. This information is used by the <a class="el" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c" title="Execution of body block with a minimum delay of &#39;interval_ms&#39; milliseconds in between.">TIMETASK</a> macro when reading the current uptime in milliseconds. With this double buffering, there is no need to disable interrupts in main context when reading from the array, as access to the array index is atomic.</li>
</ul>
<p>The register GPIOR0 is cleared during startup by placing appropriate code into the .init3 section. </p>

<p class="definition">Definition in file <a class="el" href="time_task_8h_source.html">timeTask.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aef699878d6c6b78f8343ab3c6c5fa1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef699878d6c6b78f8343ab3c6c5fa1a6">&#9670;&nbsp;</a></span>CYCLETASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CYCLETASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cycles&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;static uint32_t name = 0; if (! (name = (name &gt; cycles) ? 0 : (name + 1)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execution of body block every 'cycles' loop cycles. </p>
<p>Needs NO initialization via <a class="el" href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411" title="Initialization for the TIMETASK macro and for execution time measurement.">timeTask_init()</a> and hence no timer.</p>
<p><b>Usage:</b> </p><div class="fragment"><div class="line"><span class="keywordflow">for</span>(;;) { <span class="comment">// main loop</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="time_task_8h.html#aef699878d6c6b78f8343ab3c6c5fa1a6">CYCLETASK</a>(T1, 1000) { <span class="comment">// execute every 1000 loop cycles</span></div>
<div class="line">        <span class="comment">// do some stuff</span></div>
<div class="line">        <span class="keyword">static</span> int16_t j = 0;</div>
<div class="line">        j++;</div>
<div class="line">        <a class="code" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a>(<a class="code" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a>, <span class="stringliteral">&quot;T1: %d\n&quot;</span>, j);</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">     <a class="code" href="time_task_8h.html#aef699878d6c6b78f8343ab3c6c5fa1a6">CYCLETASK</a>(T2, 333) { <span class="comment">// execute every 333 loop cycles</span></div>
<div class="line">         <span class="comment">// do some other stuff</span></div>
<div class="line">         <span class="keyword">static</span> int16_t j = 0;</div>
<div class="line">         j++;</div>
<div class="line">         <a class="code" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a>(<a class="code" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a>, <span class="stringliteral">&quot;T2: %d\n&quot;</span>, j);</div>
<div class="line">     }</div>
<div class="line"> }</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="time_task_8h_source.html#l00069">69</a> of file <a class="el" href="time_task_8h_source.html">timeTask.h</a>.</p>

</div>
</div>
<a id="aa17ec8d44bd9cef3a238ce450a3ac29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17ec8d44bd9cef3a238ce450a3ac29c">&#9670;&nbsp;</a></span>TIMETASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMETASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interval_ms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keyword">static</span> uint16_t name = 0;                                            \</div>
<div class="line">    register uint16_t tt_uptime_##name = <a class="code" href="time_task_8h.html#a1737a27bf166782ba7995a8c3be4137f">timeTask_getUptime</a>();           \</div>
<div class="line">    register uint8_t tt_ex_##name = 0;                                   \</div>
<div class="line">    if ((tt_uptime_##name - name) &gt;= (uint16_t)interval_ms) {            \</div>
<div class="line">        name = tt_uptime_##name;                                         \</div>
<div class="line">        tt_ex_##name = 1;                                                \</div>
<div class="line">    }                                                                    \</div>
<div class="line">    if (tt_ex_##name)</div>
</div><!-- fragment -->
<p>Execution of body block with a minimum delay of 'interval_ms' milliseconds in between. </p>
<p>Requires initialization via <a class="el" href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411" title="Initialization for the TIMETASK macro and for execution time measurement.">timeTask_init()</a>. The function is robust concerning overflow of uptime variable, since comparison with interval_ms is done as unsigned using the full range of the variable. Note that the actual interval may be larger and varying due to execution time of other code in main loop as well as frequency and duration of interrupt service routines.</p>
<p>The maximum interval is 65535ms!</p>
<p><b>Usage:</b> </p><div class="fragment"><div class="line"><span class="keywordflow">for</span>(;;) { <span class="comment">// main loop</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c">TIMETASK</a>(T1, 100) { <span class="comment">// execute block approximately every 100ms</span></div>
<div class="line">        <span class="comment">// do some stuff</span></div>
<div class="line">        <span class="keyword">static</span> int16_t j = 0;</div>
<div class="line">        j++;</div>
<div class="line">        <a class="code" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a>(<a class="code" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a>, <span class="stringliteral">&quot;T1: %d\n&quot;</span>, j);</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">     <a class="code" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c">TIMETASK</a>(T2, 200) { <span class="comment">// execute block approximately every 200ms</span></div>
<div class="line">         <span class="comment">// do some other stuff</span></div>
<div class="line">         <span class="keyword">static</span> int16_t j = 0;</div>
<div class="line">         j++;</div>
<div class="line">         <a class="code" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a>(<a class="code" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a>, <span class="stringliteral">&quot;T2: %d\n&quot;</span>, j);</div>
<div class="line">     }</div>
<div class="line"> }</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="time_task_8h_source.html#l00131">131</a> of file <a class="el" href="time_task_8h_source.html">timeTask.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a822c1dd28154e13180cc743b24eb7411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a822c1dd28154e13180cc743b24eb7411">&#9670;&nbsp;</a></span>timeTask_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeTask_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization for the <a class="el" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c" title="Execution of body block with a minimum delay of &#39;interval_ms&#39; milliseconds in between.">TIMETASK</a> macro and for execution time measurement. </p>
<p>Uses timer 5 to fire output compare match interrupt every millisecond. Global interrupts must be enabled manually after calling this function.</p>
<p>Note that <a class="el" href="time_task_8h.html#a822c1dd28154e13180cc743b24eb7411" title="Initialization for the TIMETASK macro and for execution time measurement.">timeTask_init()</a> is also called by <a class="el" href="adc_8h.html#a2dcdab718d3e55b1d407969a4e31ce96" title="Initialize the AD converter library.">ADC_init()</a> to ensure that AD conversions are started by <code>TIMER5_COMPA_vect</code>. </p>

<p class="definition">Definition at line <a class="el" href="time_task_8c_source.html#l00039">39</a> of file <a class="el" href="time_task_8c_source.html">timeTask.c</a>.</p>

</div>
</div>
<a id="a1737a27bf166782ba7995a8c3be4137f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1737a27bf166782ba7995a8c3be4137f">&#9670;&nbsp;</a></span>timeTask_getUptime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t timeTask_getUptime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get current uptime in milliseconds. </p>
<p>This function is internally used by the <a class="el" href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c" title="Execution of body block with a minimum delay of &#39;interval_ms&#39; milliseconds in between.">TIMETASK</a> macro when checking if the time task needs to be executed.</p>
<dl class="section return"><dt>Returns</dt><dd>current uptime in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="time_task_8h_source.html#l00149">149</a> of file <a class="el" href="time_task_8h_source.html">timeTask.h</a>.</p>

</div>
</div>
<a id="a8d1bb394b8fd926a298686e31f057837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d1bb394b8fd926a298686e31f057837">&#9670;&nbsp;</a></span>timeTask_getTimestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeTask_getTimestamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *&#160;</td>
          <td class="paramname"><em>timestamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a timestamp for execution time measurement. </p>
<p>This functions captures the uptime with a resolution of 1 microsecond.</p>
<p>Use this function in conjunction with <a class="el" href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03" title="Calculate the duration between timestamps stopTime and startTime.">timeTask_getDuration()</a> to get the duration between two timestamps.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestamp</td><td>receives the current timestamp </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="time_task_8c_source.html#l00068">68</a> of file <a class="el" href="time_task_8c_source.html">timeTask.c</a>.</p>

</div>
</div>
<a id="a30b2c9c69d7b5f602148b927769c3d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30b2c9c69d7b5f602148b927769c3d03">&#9670;&nbsp;</a></span>timeTask_getDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t timeTask_getDuration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *&#160;</td>
          <td class="paramname"><em>startTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtime_task__time__t.html">timeTask_time_t</a> *&#160;</td>
          <td class="paramname"><em>stopTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the duration between timestamps stopTime and startTime. </p>
<p>stopTime must represent a larger value than startTime. No overflow of the timestamps are taken into account (which happens after an uptime of about 1193 hours). Although the timestamps have a larger range (see <a class="el" href="structtime_task__time__t.html" title="Timestamp structure which holds a timstamp acquired by timeTask_getTimestamp().">timeTask_time_t</a>), the maximum duration between two timestamps is limited by 4294967295us (about 1.19 hours).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startTime</td><td>first timestamp </td></tr>
    <tr><td class="paramname">stopTime</td><td>second timestamp (larger than startTime) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>duration in microseconds (max. value is 4294967295us) </dd></dl>

<p class="definition">Definition at line <a class="el" href="time_task_8c_source.html#l00082">82</a> of file <a class="el" href="time_task_8c_source.html">timeTask.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="atime_task_8h_html_aa17ec8d44bd9cef3a238ce450a3ac29c"><div class="ttname"><a href="time_task_8h.html#aa17ec8d44bd9cef3a238ce450a3ac29c">TIMETASK</a></div><div class="ttdeci">#define TIMETASK(name, interval_ms)</div><div class="ttdoc">Execution of body block with a minimum delay of 'interval_ms' milliseconds in between.</div><div class="ttdef"><b>Definition:</b> <a href="time_task_8h_source.html#l00131">timeTask.h:131</a></div></div>
<div class="ttc" id="atime_task_8h_html_a1737a27bf166782ba7995a8c3be4137f"><div class="ttname"><a href="time_task_8h.html#a1737a27bf166782ba7995a8c3be4137f">timeTask_getUptime</a></div><div class="ttdeci">static uint16_t timeTask_getUptime(void)</div><div class="ttdoc">Get current uptime in milliseconds.</div><div class="ttdef"><b>Definition:</b> <a href="time_task_8h_source.html#l00149">timeTask.h:149</a></div></div>
<div class="ttc" id="atime_task_8h_html_aef699878d6c6b78f8343ab3c6c5fa1a6"><div class="ttname"><a href="time_task_8h.html#aef699878d6c6b78f8343ab3c6c5fa1a6">CYCLETASK</a></div><div class="ttdeci">#define CYCLETASK(name, cycles)</div><div class="ttdoc">Execution of body block every 'cycles' loop cycles.</div><div class="ttdef"><b>Definition:</b> <a href="time_task_8h_source.html#l00069">timeTask.h:69</a></div></div>
<div class="ttc" id="acommunication_8h_html_a958f6ca3d0e087a1239562da9d2aa14d"><div class="ttname"><a href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a></div><div class="ttdeci">void communication_log(const Level_t level, const char *format,...)</div><div class="ttdoc">Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.</div><div class="ttdef"><b>Definition:</b> <a href="communication_8c_source.html#l00094">communication.c:94</a></div></div>
<div class="ttc" id="acommunication_8h_html_aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f"><div class="ttname"><a href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a></div><div class="ttdeci">@ LEVEL_INFO</div><div class="ttdoc">message level for informational messages</div><div class="ttdef"><b>Definition:</b> <a href="communication_8h_source.html#l00029">communication.h:29</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_ae739fea4b40983dc0b532e496181ccd.html">tools</a></li><li class="navelem"><a class="el" href="dir_e08733222c8fd1d6299ed14b30be5fa2.html">timeTask</a></li><li class="navelem"><a class="el" href="time_task_8h.html">timeTask.h</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
