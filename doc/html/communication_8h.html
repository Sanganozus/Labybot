<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HWPRobot: communication.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HWPRobot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('communication_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">communication.h File Reference<div class="ingroups"><a class="el" href="group__lib.html">lib</a> &raquo; <a class="el" href="group__communication.html">communication</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions enabling communication between robot and HWPCS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="packet_types_8h_source.html">packetTypes.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="communication_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac2dc4470b100652ba752891eaa5e22cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ac2dc4470b100652ba752891eaa5e22cb">COMM_ERR_BUFFERFULL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ac2dc4470b100652ba752891eaa5e22cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive buffer is full.  <a href="communication_8h.html#ac2dc4470b100652ba752891eaa5e22cb">More...</a><br /></td></tr>
<tr class="separator:ac2dc4470b100652ba752891eaa5e22cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a72042cc2cf82886a8ecc8a297fd9d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a4a72042cc2cf82886a8ecc8a297fd9d2">COMM_ERR_TOO_SMALL</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a4a72042cc2cf82886a8ecc8a297fd9d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet is too small.  <a href="communication_8h.html#a4a72042cc2cf82886a8ecc8a297fd9d2">More...</a><br /></td></tr>
<tr class="separator:a4a72042cc2cf82886a8ecc8a297fd9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39569f50f4ed1e069ab62de4f999cbba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a39569f50f4ed1e069ab62de4f999cbba">COMM_ERR_HEADER_CHECKSUM</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a39569f50f4ed1e069ab62de4f999cbba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header checksum mismatch.  <a href="communication_8h.html#a39569f50f4ed1e069ab62de4f999cbba">More...</a><br /></td></tr>
<tr class="separator:a39569f50f4ed1e069ab62de4f999cbba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b29fb3bb9ee0fab42592c161377f923"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a7b29fb3bb9ee0fab42592c161377f923">COMM_ERR_SIZE_MISMATCH</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:a7b29fb3bb9ee0fab42592c161377f923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet size mismatch.  <a href="communication_8h.html#a7b29fb3bb9ee0fab42592c161377f923">More...</a><br /></td></tr>
<tr class="separator:a7b29fb3bb9ee0fab42592c161377f923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576c01ed60662c39a6443f032a1d766d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a576c01ed60662c39a6443f032a1d766d">COMM_ERR_CHECKSUM</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:a576c01ed60662c39a6443f032a1d766d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global checksum mismatch.  <a href="communication_8h.html#a576c01ed60662c39a6443f032a1d766d">More...</a><br /></td></tr>
<tr class="separator:a576c01ed60662c39a6443f032a1d766d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0206c4eeab00679a4d2ffbb6e551c1be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a0206c4eeab00679a4d2ffbb6e551c1be">COMM_ERR_UNREGISTEREDCHANNEL</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:a0206c4eeab00679a4d2ffbb6e551c1be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet received on a channel for which no callback function has been registered.  <a href="communication_8h.html#a0206c4eeab00679a4d2ffbb6e551c1be">More...</a><br /></td></tr>
<tr class="separator:a0206c4eeab00679a4d2ffbb6e551c1be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40243218c26b75d62ed9983d246c601d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a40243218c26b75d62ed9983d246c601d">COMM_ERR_OUT_OF_MEMORY</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:a40243218c26b75d62ed9983d246c601d"><td class="mdescLeft">&#160;</td><td class="mdescRight">No memory for buffer in <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log()</a> or communication_log_P () could be allocated on heap.  <a href="communication_8h.html#a40243218c26b75d62ed9983d246c601d">More...</a><br /></td></tr>
<tr class="separator:a40243218c26b75d62ed9983d246c601d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf7c9abafd1641a6c59bd7ccdf135d00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#aaf7c9abafd1641a6c59bd7ccdf135d00">COMM_MAX_CHANNELS</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:aaf7c9abafd1641a6c59bd7ccdf135d00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of the number of communication channels.  <a href="communication_8h.html#aaf7c9abafd1641a6c59bd7ccdf135d00">More...</a><br /></td></tr>
<tr class="separator:aaf7c9abafd1641a6c59bd7ccdf135d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a141571b5deee9eb44ec4418e27498edb"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a141571b5deee9eb44ec4418e27498edb">ChannelCallback_t</a>) (const uint8_t *, const uint16_t)</td></tr>
<tr class="memdesc:a141571b5deee9eb44ec4418e27498edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition of a function pointer defining the channel callback functions for incoming packages.  <a href="communication_8h.html#a141571b5deee9eb44ec4418e27498edb">More...</a><br /></td></tr>
<tr class="separator:a141571b5deee9eb44ec4418e27498edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aba9282db2114423e9c2e2f4ad32f550f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a> { <br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa9525cea26834bf3ef0a859dce0e067b2">LEVEL_SEVERE</a> = 0, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa2c5e7c66e41be7a8f0fcfb4f81a12c4a">LEVEL_WARNING</a> = 1, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a> = 2, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa7aba4b94af3ab21b068c95b540a726e9">LEVEL_FINE</a> = 3, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa3430dedcbafdec4971559707704e5c7d">LEVEL_FINER</a> = 4, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fabb652376541b08fc5c1e8fab891c646b">LEVEL_FINEST</a> = 5
<br />
 }</td></tr>
<tr class="memdesc:aba9282db2114423e9c2e2f4ad32f550f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log levels for distinguishing different categories of log messages.  <a href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">More...</a><br /></td></tr>
<tr class="separator:aba9282db2114423e9c2e2f4ad32f550f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d">communication_init</a> (void)</td></tr>
<tr class="memdesc:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the communication protocol library.  <a href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d">More...</a><br /></td></tr>
<tr class="separator:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5431607792db0c22d879f78d7130505a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a5431607792db0c22d879f78d7130505a">communication_setCallback</a> (const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a> channel, const <a class="el" href="communication_8h.html#a141571b5deee9eb44ec4418e27498edb">ChannelCallback_t</a> callback)</td></tr>
<tr class="memdesc:a5431607792db0c22d879f78d7130505a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function with prototype as defined by ChannelCallback_t for a communication channel.  <a href="communication_8h.html#a5431607792db0c22d879f78d7130505a">More...</a><br /></td></tr>
<tr class="separator:a5431607792db0c22d879f78d7130505a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5634e7cbba8f212c0af5d385ef9d1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a9b5634e7cbba8f212c0af5d385ef9d1e">communication_clearCallback</a> (const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a> channel)</td></tr>
<tr class="memdesc:a9b5634e7cbba8f212c0af5d385ef9d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister the callback function for the given communication channel.  <a href="communication_8h.html#a9b5634e7cbba8f212c0af5d385ef9d1e">More...</a><br /></td></tr>
<tr class="separator:a9b5634e7cbba8f212c0af5d385ef9d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae564c6709b426ad32c18d14ed9017330"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ae564c6709b426ad32c18d14ed9017330">communication_writePacket</a> (const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a> channel, const uint8_t *packet, const uint16_t size)</td></tr>
<tr class="memdesc:ae564c6709b426ad32c18d14ed9017330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a packet to HWPCS on a specified channel.  <a href="communication_8h.html#ae564c6709b426ad32c18d14ed9017330">More...</a><br /></td></tr>
<tr class="separator:ae564c6709b426ad32c18d14ed9017330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40c2f783a1c166ccfe60255767ae129"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#af40c2f783a1c166ccfe60255767ae129">communication_readPackets</a> (void)</td></tr>
<tr class="memdesc:af40c2f783a1c166ccfe60255767ae129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read all available packets from the corresponding UART FIFO buffer.  <a href="communication_8h.html#af40c2f783a1c166ccfe60255767ae129">More...</a><br /></td></tr>
<tr class="separator:af40c2f783a1c166ccfe60255767ae129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958f6ca3d0e087a1239562da9d2aa14d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">communication_log</a> (const <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a> level, const char *format,...)</td></tr>
<tr class="memdesc:a958f6ca3d0e087a1239562da9d2aa14d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a log packet to HWPCS on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba57f68835bdd4c662bad38a70d1f13f08" title="Debug channel, Robot-&gt;HWPCS, used by communication_log()">CH_OUT_DEBUG</a> (0x00) which is shown in the Debug View.  <a href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d">More...</a><br /></td></tr>
<tr class="separator:a958f6ca3d0e087a1239562da9d2aa14d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110ba162015650bfeb25ab1ab56187f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a110ba162015650bfeb25ab1ab56187f5">communication_log_P</a> (const <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a> level, const char *format,...)</td></tr>
<tr class="memdesc:a110ba162015650bfeb25ab1ab56187f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log()</a>, however the format argument resides in flash (program) memory.  <a href="communication_8h.html#a110ba162015650bfeb25ab1ab56187f5">More...</a><br /></td></tr>
<tr class="separator:a110ba162015650bfeb25ab1ab56187f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd5b16cc5959f7515e45e123160dcda"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a4bd5b16cc5959f7515e45e123160dcda">communication_getErrors</a> (void)</td></tr>
<tr class="memdesc:a4bd5b16cc5959f7515e45e123160dcda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and clear error state.  <a href="communication_8h.html#a4bd5b16cc5959f7515e45e123160dcda">More...</a><br /></td></tr>
<tr class="separator:a4bd5b16cc5959f7515e45e123160dcda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions enabling communication between robot and HWPCS. </p>
<p>Receive buffer size and UART to be used are defined by the user configuration in <a class="el" href="uart__cfg_8h.html" title="User configuration for UART and communication library.">src/cfg/io/uart/uart_cfg.h</a>. </p>

<p class="definition">Definition in file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac2dc4470b100652ba752891eaa5e22cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2dc4470b100652ba752891eaa5e22cb">&#9670;&nbsp;</a></span>COMM_ERR_BUFFERFULL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_BUFFERFULL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive buffer is full. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00044">44</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a4a72042cc2cf82886a8ecc8a297fd9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a72042cc2cf82886a8ecc8a297fd9d2">&#9670;&nbsp;</a></span>COMM_ERR_TOO_SMALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_TOO_SMALL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packet is too small. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00047">47</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a39569f50f4ed1e069ab62de4f999cbba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39569f50f4ed1e069ab62de4f999cbba">&#9670;&nbsp;</a></span>COMM_ERR_HEADER_CHECKSUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_HEADER_CHECKSUM&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Header checksum mismatch. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00050">50</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a7b29fb3bb9ee0fab42592c161377f923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b29fb3bb9ee0fab42592c161377f923">&#9670;&nbsp;</a></span>COMM_ERR_SIZE_MISMATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_SIZE_MISMATCH&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packet size mismatch. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00053">53</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a576c01ed60662c39a6443f032a1d766d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576c01ed60662c39a6443f032a1d766d">&#9670;&nbsp;</a></span>COMM_ERR_CHECKSUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_CHECKSUM&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global checksum mismatch. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00056">56</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a0206c4eeab00679a4d2ffbb6e551c1be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0206c4eeab00679a4d2ffbb6e551c1be">&#9670;&nbsp;</a></span>COMM_ERR_UNREGISTEREDCHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_UNREGISTEREDCHANNEL&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packet received on a channel for which no callback function has been registered. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00062">62</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="a40243218c26b75d62ed9983d246c601d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40243218c26b75d62ed9983d246c601d">&#9670;&nbsp;</a></span>COMM_ERR_OUT_OF_MEMORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_ERR_OUT_OF_MEMORY&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No memory for buffer in <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log()</a> or communication_log_P () could be allocated on heap. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00068">68</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a id="aaf7c9abafd1641a6c59bd7ccdf135d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf7c9abafd1641a6c59bd7ccdf135d00">&#9670;&nbsp;</a></span>COMM_MAX_CHANNELS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMM_MAX_CHANNELS&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition of the number of communication channels. </p>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00073">73</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a141571b5deee9eb44ec4418e27498edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a141571b5deee9eb44ec4418e27498edb">&#9670;&nbsp;</a></span>ChannelCallback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ChannelCallback_t) (const uint8_t *, const uint16_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition of a function pointer defining the channel callback functions for incoming packages. </p>
<p>The callback function is executed by <a class="el" href="communication_8h.html#af40c2f783a1c166ccfe60255767ae129" title="Read all available packets from the corresponding UART FIFO buffer.">communication_readPackets()</a> when a packet was received for the corresponding channel.</p>
<p>Registering the callback function <code>cbf()</code> for channel i can be done by <a class="el" href="communication_8h.html#a5431607792db0c22d879f78d7130505a">communication_setCallback</a>(i, cbf).</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> cbf(<span class="keyword">const</span> uint8_t* packet, <span class="keyword">const</span> uint16_t size) {</div>
<div class="line">    <span class="comment">// parse packet and do some stuff</span></div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">communication_setCallback(i, cbf);</div>
</div><!-- fragment --><p>The signature of the callback function is: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>pointer to the received packet (uint8_t*) </td></tr>
    <tr><td class="paramname">size</td><td>size of the received packet (uint16_t) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00099">99</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aba9282db2114423e9c2e2f4ad32f550f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9282db2114423e9c2e2f4ad32f550f">&#9670;&nbsp;</a></span>Level_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log levels for distinguishing different categories of log messages. </p>
<p>Log levels correspond to Java log levels and are shown in the debug view of HWPCS. To be used in <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log(const Level_t level, const char* format, ...)</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fa9525cea26834bf3ef0a859dce0e067b2"></a>LEVEL_SEVERE&#160;</td><td class="fielddoc"><p>message level indicating a serious failure </p>
</td></tr>
<tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fa2c5e7c66e41be7a8f0fcfb4f81a12c4a"></a>LEVEL_WARNING&#160;</td><td class="fielddoc"><p>message level indicating a potential problem </p>
</td></tr>
<tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f"></a>LEVEL_INFO&#160;</td><td class="fielddoc"><p>message level for informational messages </p>
</td></tr>
<tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fa7aba4b94af3ab21b068c95b540a726e9"></a>LEVEL_FINE&#160;</td><td class="fielddoc"><p>message level providing tracing information </p>
</td></tr>
<tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fa3430dedcbafdec4971559707704e5c7d"></a>LEVEL_FINER&#160;</td><td class="fielddoc"><p>message level indicating a fairly detailed tracing message </p>
</td></tr>
<tr><td class="fieldname"><a id="aba9282db2114423e9c2e2f4ad32f550fabb652376541b08fc5c1e8fab891c646b"></a>LEVEL_FINEST&#160;</td><td class="fielddoc"><p>message level indicating a highly detailed tracing message </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="communication_8h_source.html#l00026">26</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9d1c122bc3538d94d6fd8328cd6c6a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d1c122bc3538d94d6fd8328cd6c6a2d">&#9670;&nbsp;</a></span>communication_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the communication protocol library. </p>
<p>Must be invoked before any other communication library function. This function assumes that the UART to be used for communication was initialized before (call <a class="el" href="uart_8h.html#a0c0ca72359ddf28dcd15900dfba19343" title="Initialize the UART library.">uart_init()</a> before this function). </p>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00078">78</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="a5431607792db0c22d879f78d7130505a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5431607792db0c22d879f78d7130505a">&#9670;&nbsp;</a></span>communication_setCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_setCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="communication_8h.html#a141571b5deee9eb44ec4418e27498edb">ChannelCallback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a callback function with prototype as defined by ChannelCallback_t for a communication channel. </p>
<p>The callback function is executed by <a class="el" href="communication_8h.html#af40c2f783a1c166ccfe60255767ae129" title="Read all available packets from the corresponding UART FIFO buffer.">communication_readPackets()</a> when a packet was received for the corresponding channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>communication channel </td></tr>
    <tr><td class="paramname">callback</td><td>function pointer to the callback function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00084">84</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="a9b5634e7cbba8f212c0af5d385ef9d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5634e7cbba8f212c0af5d385ef9d1e">&#9670;&nbsp;</a></span>communication_clearCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_clearCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister the callback function for the given communication channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>communication channel </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00089">89</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="ae564c6709b426ad32c18d14ed9017330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae564c6709b426ad32c18d14ed9017330">&#9670;&nbsp;</a></span>communication_writePacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_writePacket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fb">Channel_t</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a packet to HWPCS on a specified channel. </p>
<p>Blocks until all bytes have been put into the UART transmit buffer.</p>
<p>Due to blocking, this function must not be called from interrupt context. See documentation of function <a class="el" href="uart_8h.html#a607ec44032a01503bb7cdc0ce1f46dd3" title="Write a single byte to the FIFO TX buffer of the corresponding UART.">uart_write0()</a> on how to disable blocking.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><a class="code" href="struct_telemetry__t.html">Telemetry_t</a> telemetry;</div>
<div class="line">telemetry.<a class="code" href="struct_telemetry__t.html#a5363bfa490ed7ee7e0707c7e8bb7f941">infrared1</a> = <a class="code" href="adc_8h.html#a82a5c6a8174e7f40c61017879e522c45">ADC_getFilteredValue</a>(0);</div>
<div class="line"><a class="code" href="communication_8h.html#ae564c6709b426ad32c18d14ed9017330">communication_writePacket</a>(<a class="code" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba680d3bd7c75ae04b86764ae70af1cbd2">CH_OUT_TELEMETRY</a>, (uint8_t*)&amp;telemetry, <span class="keyword">sizeof</span>(telemetry));</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>the channel to use, given as Channel_t (see <a class="el" href="packet_types_8h.html" title="Packet types used for communication between robot and HWPCS.">packetTypes.h</a>) </td></tr>
    <tr><td class="paramname">packet</td><td>pointer to the packet to send (see <a class="el" href="packet_types_8h.html" title="Packet types used for communication between robot and HWPCS.">packetTypes.h</a>) </td></tr>
    <tr><td class="paramname">size</td><td>size of the packet to send </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00134">134</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="af40c2f783a1c166ccfe60255767ae129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40c2f783a1c166ccfe60255767ae129">&#9670;&nbsp;</a></span>communication_readPackets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_readPackets </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read all available packets from the corresponding UART FIFO buffer. </p>
<p>Should be called periodically from the main loop context to poll received packages. The function will internally invoke registered channel callback functions which can be registered with <a class="el" href="communication_8h.html#a5431607792db0c22d879f78d7130505a" title="Register a callback function with prototype as defined by ChannelCallback_t for a communication chann...">communication_setCallback()</a>.</p>
<p>The following error flags are set by this function, which can be fetched and cleared with <a class="el" href="communication_8h.html#a4bd5b16cc5959f7515e45e123160dcda" title="Read and clear error state.">communication_getErrors()</a>: <a class="el" href="communication_8h.html#ac2dc4470b100652ba752891eaa5e22cb" title="Receive buffer is full.">COMM_ERR_BUFFERFULL</a>, <a class="el" href="communication_8h.html#a4a72042cc2cf82886a8ecc8a297fd9d2" title="Packet is too small.">COMM_ERR_TOO_SMALL</a>, <a class="el" href="communication_8h.html#a39569f50f4ed1e069ab62de4f999cbba" title="Header checksum mismatch.">COMM_ERR_HEADER_CHECKSUM</a>, <a class="el" href="communication_8h.html#a7b29fb3bb9ee0fab42592c161377f923" title="Packet size mismatch.">COMM_ERR_SIZE_MISMATCH</a>, <a class="el" href="communication_8h.html#a576c01ed60662c39a6443f032a1d766d" title="Global checksum mismatch.">COMM_ERR_CHECKSUM</a>, <a class="el" href="communication_8h.html#a0206c4eeab00679a4d2ffbb6e551c1be" title="Packet received on a channel for which no callback function has been registered.">COMM_ERR_UNREGISTEREDCHANNEL</a> </p>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00243">243</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="a958f6ca3d0e087a1239562da9d2aa14d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a958f6ca3d0e087a1239562da9d2aa14d">&#9670;&nbsp;</a></span>communication_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_log </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a log packet to HWPCS on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba57f68835bdd4c662bad38a70d1f13f08" title="Debug channel, Robot-&gt;HWPCS, used by communication_log()">CH_OUT_DEBUG</a> (0x00) which is shown in the Debug View. </p>
<p>The resulting message string will be truncated after 256 characters excluding null termination. The function blocks until all bytes have been put into the UART transmit buffer.</p>
<p>Due to blocking, this function must not be called from interrupt context. See documentation of function <a class="el" href="uart_8h.html#a607ec44032a01503bb7cdc0ce1f46dd3" title="Write a single byte to the FIFO TX buffer of the corresponding UART.">uart_write0()</a> on how to disable blocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>one of <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f" title="Log levels for distinguishing different categories of log messages.">Level_t</a> </td></tr>
    <tr><td class="paramname">format</td><td>a string containing the message format (see <a href="https://www.nongnu.org/avr-libc/user-manual/group__avr__stdio.html" target="_blank">vfprintf</a> from AVR Libc for details) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00094">94</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="a110ba162015650bfeb25ab1ab56187f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110ba162015650bfeb25ab1ab56187f5">&#9670;&nbsp;</a></span>communication_log_P()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_log_P </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f">Level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log()</a>, however the format argument resides in flash (program) memory. </p>
<p>Send a log packet to HWPCS on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba57f68835bdd4c662bad38a70d1f13f08" title="Debug channel, Robot-&gt;HWPCS, used by communication_log()">CH_OUT_DEBUG</a> (0x00) which is shown in the Debug View. The resulting message string will be truncated after 256 characters excluding null termination. The function blocks until all bytes have been put into the UART transmit buffer.</p>
<p>Due to blocking, this function must not be called from interrupt context. See documentation of function <a class="el" href="uart_8h.html#a607ec44032a01503bb7cdc0ce1f46dd3" title="Write a single byte to the FIFO TX buffer of the corresponding UART.">uart_write0()</a> on how to disable blocking.</p>
<p>This function should be used in conjunction with type modifiers from <a href="https://www.nongnu.org/avr-libc/user-manual/group__avr__pgmspace.html" target="_blank">&lt;avr/pgmspace.h&gt;</a>. The first argument format must reside in flash (program) memory. For statically allocated strings this can be done with</p>
<div class="fragment"><div class="line">uint8_t i = 3;</div>
<div class="line"><span class="keywordtype">char</span> str[] = <span class="stringliteral">&quot;some text&quot;</span>;</div>
<div class="line"><a class="code" href="communication_8h.html#a110ba162015650bfeb25ab1ab56187f5">communication_log_P</a>(<a class="code" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a>, PSTR(<span class="stringliteral">&quot;Iteration i=%i Text=%s&quot;</span>), i, str);</div>
</div><!-- fragment --><p>For other possibilities and further details see <a href="https://www.nongnu.org/avr-libc/user-manual/group__avr__pgmspace.html" target="_blank">&lt;avr/pgmspace.h&gt;</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>one of <a class="el" href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550f" title="Log levels for distinguishing different categories of log messages.">Level_t</a> </td></tr>
    <tr><td class="paramname">format</td><td>a string containing the message format (see <a href="https://www.nongnu.org/avr-libc/user-manual/group__avr__stdio.html" target="_blank">vfprintf</a> from AVR Libc for details) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00114">114</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
<a id="a4bd5b16cc5959f7515e45e123160dcda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd5b16cc5959f7515e45e123160dcda">&#9670;&nbsp;</a></span>communication_getErrors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t communication_getErrors </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and clear error state. </p>
<p>The error state is set by <a class="el" href="communication_8h.html#af40c2f783a1c166ccfe60255767ae129" title="Read all available packets from the corresponding UART FIFO buffer.">communication_readPackets()</a> to indicate several problems which may have occurred while reading the packets. <a class="el" href="communication_8h.html#a958f6ca3d0e087a1239562da9d2aa14d" title="Send a log packet to HWPCS on channel CH_OUT_DEBUG (0x00) which is shown in the Debug View.">communication_log()</a> and <a class="el" href="communication_8h.html#a110ba162015650bfeb25ab1ab56187f5" title="Same as communication_log(), however the format argument resides in flash (program) memory.">communication_log_P()</a> can also set the error <a class="el" href="communication_8h.html#a40243218c26b75d62ed9983d246c601d" title="No memory for buffer in communication_log() or communication_log_P () could be allocated on heap.">COMM_ERR_OUT_OF_MEMORY</a> in case an internal buffer for creating the log message cannot be allocated.</p>
<dl class="section return"><dt>Returns</dt><dd>uint8_t containing the error bits as given by the following definitions: <a class="el" href="communication_8h.html#ac2dc4470b100652ba752891eaa5e22cb" title="Receive buffer is full.">COMM_ERR_BUFFERFULL</a>, <a class="el" href="communication_8h.html#a4a72042cc2cf82886a8ecc8a297fd9d2" title="Packet is too small.">COMM_ERR_TOO_SMALL</a>, <a class="el" href="communication_8h.html#a39569f50f4ed1e069ab62de4f999cbba" title="Header checksum mismatch.">COMM_ERR_HEADER_CHECKSUM</a>, <a class="el" href="communication_8h.html#a7b29fb3bb9ee0fab42592c161377f923" title="Packet size mismatch.">COMM_ERR_SIZE_MISMATCH</a>, <a class="el" href="communication_8h.html#a576c01ed60662c39a6443f032a1d766d" title="Global checksum mismatch.">COMM_ERR_CHECKSUM</a>, <a class="el" href="communication_8h.html#a0206c4eeab00679a4d2ffbb6e551c1be" title="Packet received on a channel for which no callback function has been registered.">COMM_ERR_UNREGISTEREDCHANNEL</a>, <a class="el" href="communication_8h.html#a40243218c26b75d62ed9983d246c601d" title="No memory for buffer in communication_log() or communication_log_P () could be allocated on heap.">COMM_ERR_OUT_OF_MEMORY</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="communication_8c_source.html#l00249">249</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astruct_telemetry__t_html"><div class="ttname"><a href="struct_telemetry__t.html">Telemetry_t</a></div><div class="ttdoc">Telemetry data of robot.</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00075">packetTypes.h:75</a></div></div>
<div class="ttc" id="acommunication_8h_html_ae564c6709b426ad32c18d14ed9017330"><div class="ttname"><a href="communication_8h.html#ae564c6709b426ad32c18d14ed9017330">communication_writePacket</a></div><div class="ttdeci">void communication_writePacket(const Channel_t channel, const uint8_t *packet, const uint16_t size)</div><div class="ttdoc">Send a packet to HWPCS on a specified channel.</div><div class="ttdef"><b>Definition:</b> <a href="communication_8c_source.html#l00134">communication.c:134</a></div></div>
<div class="ttc" id="apacket_types_8h_html_a98c7ef0270800815d74cb371e50f93fba680d3bd7c75ae04b86764ae70af1cbd2"><div class="ttname"><a href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba680d3bd7c75ae04b86764ae70af1cbd2">CH_OUT_TELEMETRY</a></div><div class="ttdeci">@ CH_OUT_TELEMETRY</div><div class="ttdoc">for sending Telemetry_t to Telemetry View in HWPCS</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00050">packetTypes.h:50</a></div></div>
<div class="ttc" id="acommunication_8h_html_a110ba162015650bfeb25ab1ab56187f5"><div class="ttname"><a href="communication_8h.html#a110ba162015650bfeb25ab1ab56187f5">communication_log_P</a></div><div class="ttdeci">void communication_log_P(const Level_t level, const char *format,...)</div><div class="ttdoc">Same as communication_log(), however the format argument resides in flash (program) memory.</div><div class="ttdef"><b>Definition:</b> <a href="communication_8c_source.html#l00114">communication.c:114</a></div></div>
<div class="ttc" id="astruct_telemetry__t_html_a5363bfa490ed7ee7e0707c7e8bb7f941"><div class="ttname"><a href="struct_telemetry__t.html#a5363bfa490ed7ee7e0707c7e8bb7f941">Telemetry_t::infrared1</a></div><div class="ttdeci">uint16_t infrared1</div><div class="ttdoc">distance of infrared sensor 1 measured in mm</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00080">packetTypes.h:80</a></div></div>
<div class="ttc" id="acommunication_8h_html_aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f"><div class="ttname"><a href="communication_8h.html#aba9282db2114423e9c2e2f4ad32f550fa831e8f5cdb3ed97330b2e17502149d8f">LEVEL_INFO</a></div><div class="ttdeci">@ LEVEL_INFO</div><div class="ttdoc">message level for informational messages</div><div class="ttdef"><b>Definition:</b> <a href="communication_8h_source.html#l00029">communication.h:29</a></div></div>
<div class="ttc" id="aadc_8h_html_a82a5c6a8174e7f40c61017879e522c45"><div class="ttname"><a href="adc_8h.html#a82a5c6a8174e7f40c61017879e522c45">ADC_getFilteredValue</a></div><div class="ttdeci">uint16_t ADC_getFilteredValue(const uint8_t channel)</div><div class="ttdoc">Read the filtered value from the AD converter for a given channel.</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00109">adc.c:109</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1b3272713a87fc9d111946fa64403b6d.html">communication</a></li><li class="navelem"><a class="el" href="communication_8h.html">communication.h</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
