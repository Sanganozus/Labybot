<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HWPRobot: pathFollower.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HWPRobot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('path_follower_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pathFollower.h File Reference<div class="ingroups"><a class="el" href="group__lib.html">lib</a> &raquo; <a class="el" href="group__path_follower.html">pathFollower</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of a path follower which interfaces with HWPCS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="packet_types_8h_source.html">communication/packetTypes.h</a>&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="path_follower_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_path__t.html">Path_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of a path consisting of multiple points.  <a href="struct_path__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_path_follower_ext_status__t.html">PathFollowerExtStatus_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended state of the path follower which is updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a> and which can be acquired by <a class="el" href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983" title="Retrieves the current PathFollowerExtStatus_t which is managed internally and updated by pathFollower...">pathFollower_getExtStatus()</a>.  <a href="struct_path_follower_ext_status__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac32d67047583a359b7746b231f3643e1"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1">PathFollowerCallback_t</a>) (const <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a>, const uint8_t)</td></tr>
<tr class="memdesc:ac32d67047583a359b7746b231f3643e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition of a function pointer defining the callback function which is executed when a path follower command is received on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a>.  <a href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1">More...</a><br /></td></tr>
<tr class="separator:ac32d67047583a359b7746b231f3643e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a22e15cfde85f9861b971ef84759f0132"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a22e15cfde85f9861b971ef84759f0132">pathFollower_init</a> (void)</td></tr>
<tr class="memdesc:a22e15cfde85f9861b971ef84759f0132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the path following library.  <a href="path_follower_8h.html#a22e15cfde85f9861b971ef84759f0132">More...</a><br /></td></tr>
<tr class="separator:a22e15cfde85f9861b971ef84759f0132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f21572727f54b0ba8fd64f593fd7cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf">pathFollower_update</a> (const <a class="el" href="struct_pose__t.html">Pose_t</a> *currentPose)</td></tr>
<tr class="memdesc:a39f21572727f54b0ba8fd64f593fd7cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate and determine all the fields in the current <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> and <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a> (which are internally managed and can be acquired with <a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894" title="Retrieves the current PathFollowerStatus_t which is managed internally and updated by pathFollower_up...">pathFollower_getStatus()</a> and <a class="el" href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983" title="Retrieves the current PathFollowerExtStatus_t which is managed internally and updated by pathFollower...">pathFollower_getExtStatus()</a>) from the current robot position and the path (either received by the communication protocol or manually set by <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a>) in case path following is enabled.  <a href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf">More...</a><br /></td></tr>
<tr class="separator:a39f21572727f54b0ba8fd64f593fd7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1c71ff5254b42468e8dde08b9d3198"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198">pathFollower_setNewPath</a> (const <a class="el" href="struct_path__t.html">Path_t</a> *new_path)</td></tr>
<tr class="memdesc:aea1c71ff5254b42468e8dde08b9d3198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually set a new path for the path follower.  <a href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198">More...</a><br /></td></tr>
<tr class="separator:aea1c71ff5254b42468e8dde08b9d3198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00baa8756b41d53f7c28e2be4f0efb86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a00baa8756b41d53f7c28e2be4f0efb86">pathFollower_clearPath</a> (void)</td></tr>
<tr class="memdesc:a00baa8756b41d53f7c28e2be4f0efb86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a previously set path (either through HWPCS or by means of <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a>) and reset the path follower in order to free unused memory.  <a href="path_follower_8h.html#a00baa8756b41d53f7c28e2be4f0efb86">More...</a><br /></td></tr>
<tr class="separator:a00baa8756b41d53f7c28e2be4f0efb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ea4e1053cbf2e235552a8962aa7f1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a59ea4e1053cbf2e235552a8962aa7f1e">pathFollower_command</a> (const <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a> cmd)</td></tr>
<tr class="memdesc:a59ea4e1053cbf2e235552a8962aa7f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually issue a command for the path follower (start, pause, reset).  <a href="path_follower_8h.html#a59ea4e1053cbf2e235552a8962aa7f1e">More...</a><br /></td></tr>
<tr class="separator:a59ea4e1053cbf2e235552a8962aa7f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7098b1eab4789bd3df9858e750fd894"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_path_follower_status__t.html">PathFollowerStatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894">pathFollower_getStatus</a> (void)</td></tr>
<tr class="memdesc:af7098b1eab4789bd3df9858e750fd894"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> which is managed internally and updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>.  <a href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894">More...</a><br /></td></tr>
<tr class="separator:af7098b1eab4789bd3df9858e750fd894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e152f7db3d85b771a1bf184f29b4983"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_path_follower_ext_status__t.html">PathFollowerExtStatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983">pathFollower_getExtStatus</a> (void)</td></tr>
<tr class="memdesc:a1e152f7db3d85b771a1bf184f29b4983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a> which is managed internally and updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>.  <a href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983">More...</a><br /></td></tr>
<tr class="separator:a1e152f7db3d85b771a1bf184f29b4983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa85339d2b17c7c49683bee9001fcb598"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#aa85339d2b17c7c49683bee9001fcb598">pathFollower_getLookaheadDistance</a> (void)</td></tr>
<tr class="memdesc:aa85339d2b17c7c49683bee9001fcb598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the currently used lookahead distance.  <a href="path_follower_8h.html#aa85339d2b17c7c49683bee9001fcb598">More...</a><br /></td></tr>
<tr class="separator:aa85339d2b17c7c49683bee9001fcb598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8194209d0863308d707a703e7df9124"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124">pathFollower_setLookaheadDistance</a> (const float lookaheadDistance)</td></tr>
<tr class="memdesc:ae8194209d0863308d707a703e7df9124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the distance in mm between orthogonal projection of current position onto path and lookahead point.  <a href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124">More...</a><br /></td></tr>
<tr class="separator:ae8194209d0863308d707a703e7df9124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36331694e4aeaf606221cc988b7fc18"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#ac36331694e4aeaf606221cc988b7fc18">pathFollower_getSegmentLimit</a> (void)</td></tr>
<tr class="memdesc:ac36331694e4aeaf606221cc988b7fc18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the currently used segment limit.  <a href="path_follower_8h.html#ac36331694e4aeaf606221cc988b7fc18">More...</a><br /></td></tr>
<tr class="separator:ac36331694e4aeaf606221cc988b7fc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3993507a5bbe25db7ea27db9bbbb9dd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8">pathFollower_setSegmentLimit</a> (const uint8_t segmentLimit)</td></tr>
<tr class="memdesc:a3993507a5bbe25db7ea27db9bbbb9dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of segments (starting from the current one) to look ahead when locating the orthogonal projection of the current position onto the path.  <a href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8">More...</a><br /></td></tr>
<tr class="separator:a3993507a5bbe25db7ea27db9bbbb9dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd90088470deaab1724437872c1a85d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#aafd90088470deaab1724437872c1a85d">pathFollower_setCallback</a> (const <a class="el" href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1">PathFollowerCallback_t</a> callback)</td></tr>
<tr class="memdesc:aafd90088470deaab1724437872c1a85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function with prototype as defined by <a class="el" href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1" title="Type definition of a function pointer defining the callback function which is executed when a path fo...">PathFollowerCallback_t</a> which is executed when a path follower command is received on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a> from HWPCS.  <a href="path_follower_8h.html#aafd90088470deaab1724437872c1a85d">More...</a><br /></td></tr>
<tr class="separator:aafd90088470deaab1724437872c1a85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe02e875a060fd621256006fa95d6b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="path_follower_8h.html#adfe02e875a060fd621256006fa95d6b9">pathFollower_removeCallback</a> (void)</td></tr>
<tr class="memdesc:adfe02e875a060fd621256006fa95d6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister the callback function for path follower commands from HWPCS.  <a href="path_follower_8h.html#adfe02e875a060fd621256006fa95d6b9">More...</a><br /></td></tr>
<tr class="separator:adfe02e875a060fd621256006fa95d6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of a path follower which interfaces with HWPCS. </p>
<p>Additionally, the path follower can be controlled directly by functions such as <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a> and <a class="el" href="path_follower_8h.html#a59ea4e1053cbf2e235552a8962aa7f1e" title="Manually issue a command for the path follower (start, pause, reset).">pathFollower_command()</a>.</p>
<p>The path follower internally manages two states of type <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> and <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a>. These states are updated by calls to <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. The current state can be acquired with <a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894" title="Retrieves the current PathFollowerStatus_t which is managed internally and updated by pathFollower_up...">pathFollower_getStatus()</a> and <a class="el" href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983" title="Retrieves the current PathFollowerExtStatus_t which is managed internally and updated by pathFollower...">pathFollower_getExtStatus()</a>.</p>
<p>In order to have HWPCS reflect the recent state and update the Scene view accordingly, the state returned by <a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894" title="Retrieves the current PathFollowerStatus_t which is managed internally and updated by pathFollower_up...">pathFollower_getStatus()</a> must be sent regularly to HWPCS.</p>
<p>You are welcome to modify the path follower according to your needs.</p>
<p>When compiling with the symbol PATHFOLLOWER_QUIET defined, no informational messages are sent to HWPCS. This includes information when a path has been set, following is started, paused or reset, path following parameters are set, end of path is reached and a switch to another segment occurs. Only error messages (such as when a path can not be set or when the path follower cannot find the orthogonal projection or lookahead point) are transmitted to HWPCS. PATHFOLLOWER_QUIET saves 428 bytes of flash memory and 32 bytes of SRAM.</p>
<p>The error messages can be suppressed when additionally compiling with the symbol PATHFOLLOWER_REALLY_QUIET defined (only applicable if PATHFOLLOWER_QUIET is defined as well). PATHFOLLOWER_REALLY_QUIET additionally saves 278 bytes of flash memory. </p>

<p class="definition">Definition in file <a class="el" href="path_follower_8h_source.html">pathFollower.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ac32d67047583a359b7746b231f3643e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32d67047583a359b7746b231f3643e1">&#9670;&nbsp;</a></span>PathFollowerCallback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* PathFollowerCallback_t) (const <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a>, const uint8_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition of a function pointer defining the callback function which is executed when a path follower command is received on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a>. </p>
<p>This is useful if user defined actions are to be performed on reception of a command for the path follower. For example, the motors can be stopped when the path follower is paused.</p>
<p>The callback function is invoked from the communication callback function which is automatically registered for channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a> (in <a class="el" href="path_follower_8h.html#a22e15cfde85f9861b971ef84759f0132" title="Initialize the path following library.">pathFollower_init()</a>).</p>
<p>Registering the callback function <code>cbf()</code> can be done by <a class="el" href="path_follower_8h.html#aafd90088470deaab1724437872c1a85d">pathFollower_setCallback</a>(cbf).</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> cbf(<span class="keyword">const</span> <a class="code" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a> cmd, <span class="keyword">const</span> uint8_t pathLen) {</div>
<div class="line">   <span class="keywordflow">if</span> (cmd == <a class="code" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0a890732dfff531795e8819a988d127896">FOLLOWER_CMD_PAUSE</a>) {</div>
<div class="line">       <a class="code" href="motor_8h.html#a2eff1871335949b26102533af43fc253">Motor_stopAll</a>();</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">pathFollower_setCallback(cbf);</div>
</div><!-- fragment --><p>The signature of the callback function is: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>the path follower command from <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0" title="Control command enumeration for PathFollowerControl_t.">PathFollowerCommand_t</a> </td></tr>
    <tr><td class="paramname">pathLen</td><td>length of the path (non-zero only for <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0ad2d8f83313138e428e7d66d206fd652c" title="New path is being uploaded.">FOLLOWER_CMD_NEWPATH</a>, otherwise zero) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8h_source.html#l00103">103</a> of file <a class="el" href="path_follower_8h_source.html">pathFollower.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a22e15cfde85f9861b971ef84759f0132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e15cfde85f9861b971ef84759f0132">&#9670;&nbsp;</a></span>pathFollower_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the path following library. </p>
<p>Must be invoked before any other path follower library function, but after initialization of the communication library (<a class="el" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d" title="Initializes the communication protocol library.">communication_init()</a>).</p>
<p>Registers a communication callback on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba923e65d416653bfae369858aabd8b834" title="for receiving PathFollowerParameters_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_PARAMS</a> for receiving path follower parameters (<a class="el" href="struct_path_follower_parameters__t.html" title="Parameters for the path follower.">PathFollowerParameters_t</a>) from HWPCS with which the lookahead distance and the segment limit can be conveniently set (see <a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124" title="Set the distance in mm between orthogonal projection of current position onto path and lookahead poin...">pathFollower_setLookaheadDistance()</a> and <a class="el" href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8" title="Set the number of segments (starting from the current one) to look ahead when locating the orthogonal...">pathFollower_setSegmentLimit()</a> for details).</p>
<p>Another communication callback is registered on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a> for receiving path follower control commands (<a class="el" href="struct_path_follower_control__t.html" title="Control command for path follower.">PathFollowerControl_t</a>) from HWPCS. This enables control of the path follower from HWPCS. If an additional callback function for the path follower is registered with <a class="el" href="path_follower_8h.html#aafd90088470deaab1724437872c1a85d" title="Register a callback function with prototype as defined by PathFollowerCallback_t which is executed wh...">pathFollower_setCallback()</a>, that function gets called when a <a class="el" href="struct_path_follower_control__t.html" title="Control command for path follower.">PathFollowerControl_t</a> was received from HWPCS. </p>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00245">245</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="a39f21572727f54b0ba8fd64f593fd7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f21572727f54b0ba8fd64f593fd7cf">&#9670;&nbsp;</a></span>pathFollower_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pathFollower_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_pose__t.html">Pose_t</a> *&#160;</td>
          <td class="paramname"><em>currentPose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate and determine all the fields in the current <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> and <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a> (which are internally managed and can be acquired with <a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894" title="Retrieves the current PathFollowerStatus_t which is managed internally and updated by pathFollower_up...">pathFollower_getStatus()</a> and <a class="el" href="path_follower_8h.html#a1e152f7db3d85b771a1bf184f29b4983" title="Retrieves the current PathFollowerExtStatus_t which is managed internally and updated by pathFollower...">pathFollower_getExtStatus()</a>) from the current robot position and the path (either received by the communication protocol or manually set by <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a>) in case path following is enabled. </p>
<p>This function should be called from <code>main()</code> context in regular intervals.</p>
<p>The function operates in two steps:</p><ol type="1">
<li>First, the location of the orthogonal projection of the current pose onto the path is determined. The function determines, starting from the current segment (in <a class="el" href="struct_path_follower_status__t.html#a23147a92842c8eb1fbdea2a3bc445849" title="start point of current path segment">PathFollowerStatus_t.segStart</a> and <a class="el" href="struct_path_follower_status__t.html#a9c1ae7a7d50ce802be27b0ee1622df7d" title="end point of current path segment">PathFollowerStatus_t.segEnd</a>) along subsequent path segments, which orthogonal projection of the current position onto the segments has smallest distance to the current position. In order to keep execution time acceptable and also to avoid taking shortcuts (or skipping too many segments) in case of concave or crossing paths, the number of consecutive segments examined is limited by the value supplied to <a class="el" href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8" title="Set the number of segments (starting from the current one) to look ahead when locating the orthogonal...">pathFollower_setSegmentLimit()</a>.</li>
<li>Once the location of the orthogonal projection is found in step 1, the location of the lookahead point is determined by advancing the distance given by <a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124" title="Set the distance in mm between orthogonal projection of current position onto path and lookahead poin...">pathFollower_setLookaheadDistance()</a> along the path, even over multiple segments if necessary.</li>
</ol>
<p>If the function returns true, a controller should generate control inputs for approaching the lookahead point. If the function returns false, the robot should stop and no further control inputs should be applied.</p>
<p>Use <a class="el" href="time_task_8h.html#a8d1bb394b8fd926a298686e31f057837" title="Get a timestamp for execution time measurement.">timeTask_getTimestamp()</a> and <a class="el" href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03" title="Calculate the duration between timestamps stopTime and startTime.">timeTask_getDuration()</a> <a class="el" href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03" title="Calculate the duration between timestamps stopTime and startTime.">timeTask_getDuration()</a> to measure the execution time of this function as it depends heavily on the values given by <a class="el" href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8" title="Set the number of segments (starting from the current one) to look ahead when locating the orthogonal...">pathFollower_setSegmentLimit()</a> and <a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124" title="Set the distance in mm between orthogonal projection of current position onto path and lookahead poin...">pathFollower_setLookaheadDistance()</a>. Note that the first run of <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a> after a new path has been set takes much longer than following runs since several internal variables need to be initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentPose</td><td>current pose of the robot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the internally managed state structures were updated and following is still enabled, false if following was disabled in case of reaching the path's end </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00288">288</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="aea1c71ff5254b42468e8dde08b9d3198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1c71ff5254b42468e8dde08b9d3198">&#9670;&nbsp;</a></span>pathFollower_setNewPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pathFollower_setNewPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_path__t.html">Path_t</a> *&#160;</td>
          <td class="paramname"><em>new_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manually set a new path for the path follower. </p>
<p>The path must consist of at least two points. Two consecutive points must be different from each other, i.e. any segment length must be non-zero.</p>
<p>This function can be used if the path is not handed over by HWPCS but set directly from C code.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><a class="code" href="struct_point__t.html">Point_t</a> pathPoints[3] = { { 0, 400 }, { 400, 600 }, { 600, 0 } };</div>
<div class="line"><a class="code" href="struct_path__t.html">Path_t</a> path = { .<a class="code" href="struct_path__t.html#a35b370369f8b62c09fb87508f43953fd">pathLength</a> = 3, .points = &amp;pathPoints[0] };</div>
<div class="line"><a class="code" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198">pathFollower_setNewPath</a>(&amp;path);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_path</td><td>a pointer to a <a class="el" href="struct_path__t.html" title="Definition of a path consisting of multiple points.">Path_t</a> structure containing the new path </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the path was successfully set, false if not enough memory is available for storing the path or the path was too short. </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00252">252</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="a00baa8756b41d53f7c28e2be4f0efb86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00baa8756b41d53f7c28e2be4f0efb86">&#9670;&nbsp;</a></span>pathFollower_clearPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_clearPath </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear a previously set path (either through HWPCS or by means of <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a>) and reset the path follower in order to free unused memory. </p>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00257">257</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="a59ea4e1053cbf2e235552a8962aa7f1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59ea4e1053cbf2e235552a8962aa7f1e">&#9670;&nbsp;</a></span>pathFollower_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_command </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a>&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manually issue a command for the path follower (start, pause, reset). </p>
<p>This function can be used if the path follower is commanded directly and not from within HWPCS.</p>
<p>A callback function registered with <a class="el" href="path_follower_8h.html#aafd90088470deaab1724437872c1a85d" title="Register a callback function with prototype as defined by PathFollowerCallback_t which is executed wh...">pathFollower_setCallback()</a> will not be executed.</p>
<p>Note that the command <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0ad2d8f83313138e428e7d66d206fd652c" title="New path is being uploaded.">FOLLOWER_CMD_NEWPATH</a> is ignored since this is covered by <a class="el" href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198" title="Manually set a new path for the path follower.">pathFollower_setNewPath()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>the command for the path follower. Can be one of <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0a085cd9422ba872c30e36398ec2efdbb1" title="start path following">FOLLOWER_CMD_START</a>, <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0a890732dfff531795e8819a988d127896" title="pause path following">FOLLOWER_CMD_PAUSE</a> or <a class="el" href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0ac48961b80f2f9ee949b8fd0ac7861931" title="reset path following (but keep current path)">FOLLOWER_CMD_RESET</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00269">269</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="af7098b1eab4789bd3df9858e750fd894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7098b1eab4789bd3df9858e750fd894">&#9670;&nbsp;</a></span>pathFollower_getStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_path_follower_status__t.html">PathFollowerStatus_t</a>* pathFollower_getStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the current <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> which is managed internally and updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. </p>
<p>Fields <a class="el" href="struct_path_follower_status__t.html#a23147a92842c8eb1fbdea2a3bc445849" title="start point of current path segment">PathFollowerStatus_t.segStart</a> and <a class="el" href="struct_path_follower_status__t.html#a9c1ae7a7d50ce802be27b0ee1622df7d" title="end point of current path segment">PathFollowerStatus_t.segEnd</a> denote the path segment on which the orthogonal projection of the robot's pose onto the path was found.</p>
<p>The field <a class="el" href="struct_path_follower_status__t.html#a61cb49e23aab67152da808584b7f36e4" title="current lookahead point where robot is heading to">PathFollowerStatus_t.lookahead</a> specifies the coordinates of the lookahead point on the path which is kept ahead by a distance (given by <a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124" title="Set the distance in mm between orthogonal projection of current position onto path and lookahead poin...">pathFollower_setLookaheadDistance()</a>) after the orthogonal projection. The lookahead point is to be treated as an intermediate goal point used for generating control commands for the robot.</p>
<p>Send the return value of this function on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba254a669dd9a8e93d9ef083c09de5ec3a" title="for sending PathFollowerStatus_t to Scene View in HWPCS">CH_OUT_PATH_FOLLOW_STATUS</a> each time after <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a> completed in order to have HWPCS evaluate it such that all information is displayed in the Scene View. This also allows HWPCS to detect the status of the path follower, e.g. when the robot reached the end of the path.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the structure of type <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a> which is updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00610">610</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="a1e152f7db3d85b771a1bf184f29b4983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e152f7db3d85b771a1bf184f29b4983">&#9670;&nbsp;</a></span>pathFollower_getExtStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_path_follower_ext_status__t.html">PathFollowerExtStatus_t</a>* pathFollower_getExtStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the current <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a> which is managed internally and updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. </p>
<p>As soon as the orthogonal projection of the robot's position is located on the last path segment, the field onLastSegment becomes true and the field distanceOPToEnd holds the distance in mm between the orthogonal projection and the end of the last path segment.</p>
<p>This information is helpful when implementing a speed controller to slow down when the end of the path is approached.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the structure of type <a class="el" href="struct_path_follower_ext_status__t.html" title="Extended state of the path follower which is updated by pathFollower_update() and which can be acquir...">PathFollowerExtStatus_t</a> which is updated by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00615">615</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="aa85339d2b17c7c49683bee9001fcb598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa85339d2b17c7c49683bee9001fcb598">&#9670;&nbsp;</a></span>pathFollower_getLookaheadDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float pathFollower_getLookaheadDistance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the currently used lookahead distance. </p>
<p>See <a class="el" href="path_follower_8h.html#ae8194209d0863308d707a703e7df9124" title="Set the distance in mm between orthogonal projection of current position onto path and lookahead poin...">pathFollower_setLookaheadDistance()</a> for details.</p>
<dl class="section return"><dt>Returns</dt><dd>lookahead distance in millimeters </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00620">620</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="ae8194209d0863308d707a703e7df9124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8194209d0863308d707a703e7df9124">&#9670;&nbsp;</a></span>pathFollower_setLookaheadDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_setLookaheadDistance </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lookaheadDistance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the distance in mm between orthogonal projection of current position onto path and lookahead point. </p>
<p>The distance must be positive. Using <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>, the lookahead point (computed in an internally managed structure of type <a class="el" href="struct_path_follower_status__t.html" title="Status of the path follower.">PathFollowerStatus_t</a>, which can be fetched with <a class="el" href="path_follower_8h.html#af7098b1eab4789bd3df9858e750fd894" title="Retrieves the current PathFollowerStatus_t which is managed internally and updated by pathFollower_up...">pathFollower_getStatus()</a>) is always kept on the path ahead of the orthogonal projection by this distance.</p>
<p>Note that when updating this value while the path follower is running, the new lookahead distance must be less than ten times the old one, otherwise the lookahead point cannot be located. This is because the extrapolation of an additional point at the end of the path (at distance of ten times the lookahead distance after the last point) is only done when a new path is set. An updated value of the lookahead distance is only taken over by the path follower when a switch of the orthogonal projection onto the path to another segment occurs.</p>
<p>Default is 1mm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lookaheadDistance</td><td>the lookahead distance given in millimeters </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00625">625</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="ac36331694e4aeaf606221cc988b7fc18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac36331694e4aeaf606221cc988b7fc18">&#9670;&nbsp;</a></span>pathFollower_getSegmentLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t pathFollower_getSegmentLimit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the currently used segment limit. </p>
<p>See <a class="el" href="path_follower_8h.html#a3993507a5bbe25db7ea27db9bbbb9dd8" title="Set the number of segments (starting from the current one) to look ahead when locating the orthogonal...">pathFollower_setSegmentLimit()</a> for details.</p>
<dl class="section return"><dt>Returns</dt><dd>the lookahead distance in millimeters </dd></dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00631">631</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="a3993507a5bbe25db7ea27db9bbbb9dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3993507a5bbe25db7ea27db9bbbb9dd8">&#9670;&nbsp;</a></span>pathFollower_setSegmentLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_setSegmentLimit </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>segmentLimit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the number of segments (starting from the current one) to look ahead when locating the orthogonal projection of the current position onto the path. </p>
<p>The minimum value is 1, indicating that only the current and next segment are taken into account for locating the lookahead point. A value of 0 is ignored.</p>
<p>This value should not be set too large, as this dramatically increases the execution time of <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a>. Use <a class="el" href="time_task_8h.html#a8d1bb394b8fd926a298686e31f057837" title="Get a timestamp for execution time measurement.">timeTask_getTimestamp()</a> and <a class="el" href="time_task_8h.html#a30b2c9c69d7b5f602148b927769c3d03" title="Calculate the duration between timestamps stopTime and startTime.">timeTask_getDuration()</a> to measure the execution time in order to select a feasible value for the segment limit.</p>
<p>Additionally, a large value can cause the path following algorithm to take unwanted shortcuts in case of crossing or concave paths.</p>
<p>It is however necessary, to deal with the problem of a concave path or a path which crosses itself.</p>
<p>Default is 5.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segmentLimit</td><td>the segment limit which is used by <a class="el" href="path_follower_8h.html#a39f21572727f54b0ba8fd64f593fd7cf" title="Calculate and determine all the fields in the current PathFollowerStatus_t and PathFollowerExtStatus_...">pathFollower_update()</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00636">636</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="aafd90088470deaab1724437872c1a85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafd90088470deaab1724437872c1a85d">&#9670;&nbsp;</a></span>pathFollower_setCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_setCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1">PathFollowerCallback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a callback function with prototype as defined by <a class="el" href="path_follower_8h.html#ac32d67047583a359b7746b231f3643e1" title="Type definition of a function pointer defining the callback function which is executed when a path fo...">PathFollowerCallback_t</a> which is executed when a path follower command is received on channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a> from HWPCS. </p>
<p>The callback function is invoked from the communication callback function which is automatically registered for channel <a class="el" href="packet_types_8h.html#a98c7ef0270800815d74cb371e50f93fba529d22d936b5ebfe2e9451a829af1591" title="for receiving PathFollowerControl_t from Scene View in HWPCS">CH_IN_PATH_FOLLOW_CTRL</a> (in <a class="el" href="path_follower_8h.html#a22e15cfde85f9861b971ef84759f0132" title="Initialize the path following library.">pathFollower_init()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>function pointer to the callback function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00641">641</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
<a id="adfe02e875a060fd621256006fa95d6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfe02e875a060fd621256006fa95d6b9">&#9670;&nbsp;</a></span>pathFollower_removeCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollower_removeCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister the callback function for path follower commands from HWPCS. </p>

<p class="definition">Definition at line <a class="el" href="path_follower_8c_source.html#l00646">646</a> of file <a class="el" href="path_follower_8c_source.html">pathFollower.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="apath_follower_8h_html_aea1c71ff5254b42468e8dde08b9d3198"><div class="ttname"><a href="path_follower_8h.html#aea1c71ff5254b42468e8dde08b9d3198">pathFollower_setNewPath</a></div><div class="ttdeci">bool pathFollower_setNewPath(const Path_t *new_path)</div><div class="ttdoc">Manually set a new path for the path follower.</div><div class="ttdef"><b>Definition:</b> <a href="path_follower_8c_source.html#l00252">pathFollower.c:252</a></div></div>
<div class="ttc" id="amotor_8h_html_a2eff1871335949b26102533af43fc253"><div class="ttname"><a href="motor_8h.html#a2eff1871335949b26102533af43fc253">Motor_stopAll</a></div><div class="ttdeci">void Motor_stopAll(void)</div><div class="ttdoc">Stop motors A and B.</div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00297">motor.c:297</a></div></div>
<div class="ttc" id="astruct_path__t_html"><div class="ttname"><a href="struct_path__t.html">Path_t</a></div><div class="ttdoc">Definition of a path consisting of multiple points.</div><div class="ttdef"><b>Definition:</b> <a href="path_follower_8h_source.html#l00049">pathFollower.h:49</a></div></div>
<div class="ttc" id="apacket_types_8h_html_a8b2a0bdc19e3b96ac3b63a61f121a2f0a890732dfff531795e8819a988d127896"><div class="ttname"><a href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0a890732dfff531795e8819a988d127896">FOLLOWER_CMD_PAUSE</a></div><div class="ttdeci">@ FOLLOWER_CMD_PAUSE</div><div class="ttdoc">pause path following</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00190">packetTypes.h:190</a></div></div>
<div class="ttc" id="astruct_path__t_html_a35b370369f8b62c09fb87508f43953fd"><div class="ttname"><a href="struct_path__t.html#a35b370369f8b62c09fb87508f43953fd">Path_t::pathLength</a></div><div class="ttdeci">uint8_t pathLength</div><div class="ttdoc">number of path points in array points</div><div class="ttdef"><b>Definition:</b> <a href="path_follower_8h_source.html#l00050">pathFollower.h:50</a></div></div>
<div class="ttc" id="astruct_point__t_html"><div class="ttname"><a href="struct_point__t.html">Point_t</a></div><div class="ttdoc">2-D Point based on int16_t.</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00148">packetTypes.h:148</a></div></div>
<div class="ttc" id="apacket_types_8h_html_a8b2a0bdc19e3b96ac3b63a61f121a2f0"><div class="ttname"><a href="packet_types_8h.html#a8b2a0bdc19e3b96ac3b63a61f121a2f0">PathFollowerCommand_t</a></div><div class="ttdeci">PathFollowerCommand_t</div><div class="ttdoc">Control command enumeration for PathFollowerControl_t.</div><div class="ttdef"><b>Definition:</b> <a href="packet_types_8h_source.html#l00187">packetTypes.h:187</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_de51839d2089cf32e26243dc57cc03a8.html">pathFollower</a></li><li class="navelem"><a class="el" href="path_follower_8h.html">pathFollower.h</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
